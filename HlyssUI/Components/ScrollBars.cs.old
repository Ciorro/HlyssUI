using HlyssUI.Layout;
using System.Collections.Generic;

namespace HlyssUI.Components
{
    public class ScrollBars : Component
    {
        private HScrollBar _hScroll;
        private VScrollBar _vScroll;

        public ScrollBars()
        {
            Width = "100%";
            Height = "100%";
            PositionType = PositionType.Absolute;
            Hoverable = false;

            Children = new List<Component>
            {
                new HScrollBar()
                {
                    Name = "hscrollbar",
                    PositionType = PositionType.Absolute
                },
                new VScrollBar()
                {
                    Name = "vscrollbar",
                    PositionType = PositionType.Absolute
                }
            };

            _hScroll = GetChild("hscrollbar") as HScrollBar;
            _vScroll = GetChild("vscrollbar") as VScrollBar;
        }

        public override void Update()
        {
            base.Update();

            if(_hScroll.Target == null || _vScroll.Target == null)
            {
                _hScroll.Target = Parent;
                _vScroll.Target = Parent;
            }

            if (Parent.TransformChanged)
            {
                _hScroll.Top = $"{TargetSize.Y - 15}px";
                _hScroll.Width = $"{TargetSize.X - (_vScroll.Visible ? 15 : 0)}px";

                _vScroll.Left = $"{TargetSize.X - 15}px";
                _vScroll.Height = $"{TargetSize.Y - (_hScroll.Visible ? 15 : 0)}px";
            }
        }
    }
}
